╔═══════════════════════════════════════════════════════════════════════════════╗
║                    TOON SHADER С ПОДДЕРЖКОЙ АЛЬФА-КАНАЛА                      ║
║                         Custom/ToonAlpha                                      ║
╚═══════════════════════════════════════════════════════════════════════════════╝

═══════════════════════════════════════════════════════════════════════════════
                              ОПИСАНИЕ
═══════════════════════════════════════════════════════════════════════════════

Полноценный Toon shader на основе ToonLightBase с добавлением:
✓ Поддержка альфа-канала (прозрачность)
✓ Alpha Blending (полупрозрачность)
✓ Alpha Clipping (вырезание по альфе)
✓ Настраиваемые blend modes
✓ ZWrite control
✓ Все функции оригинального ToonLightBase

═══════════════════════════════════════════════════════════════════════════════
                          БЫСТРОЕ ИСПОЛЬЗОВАНИЕ
═══════════════════════════════════════════════════════════════════════════════

1. Создать Material
2. Выбрать Shader: Custom/ToonAlpha
3. Назначить текстуру с альфа-каналом
4. Настроить прозрачность (см. ниже)
5. Готово!

═══════════════════════════════════════════════════════════════════════════════
                              ПАРАМЕТРЫ
═══════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────┐
│ BASE (Основное)                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

• Texture - Основная текстура (с альфа-каналом)
• Color - Цвет материала (включая альфу)

┌─────────────────────────────────────────────────────────────────────────────┐
│ TRANSPARENCY (Прозрачность)                                                  │
└─────────────────────────────────────────────────────────────────────────────┘

► Src Blend / Dst Blend - Режимы смешивания
  Пресеты:
  - Alpha Blend: Src=SrcAlpha(5), Dst=OneMinusSrcAlpha(10)
  - Additive: Src=One(1), Dst=One(1)
  - Multiply: Src=DstColor(2), Dst=Zero(0)
  - Premultiply: Src=One(1), Dst=OneMinusSrcAlpha(10)

► Z Write - Запись в буфер глубины
  - Off (0) - для полупрозрачных объектов (по умолчанию)
  - On (1) - для непрозрачных объектов

► Alpha Clipping - Вырезание по альфе (on/off)
  - Off - плавная прозрачность (стекло, дым)
  - On - жесткое вырезание (листва, сетка)

► Alpha Cutoff - Порог вырезания (0-1)
  - Используется если Alpha Clipping = On
  - Пиксели с alpha < cutoff удаляются
  - Обычно: 0.5

┌─────────────────────────────────────────────────────────────────────────────┐
│ TOON SHADING (как в ToonLightBase)                                           │
└─────────────────────────────────────────────────────────────────────────────┘

► Shadow Step - Порог тени (0-1)
  Где начинается тень

► Shadow Step Smooth - Мягкость тени (0-1)
  Плавность перехода света/тени

► Specular Step - Порог блика (0-1)
  Где появляется блик

► Specular Step Smooth - Мягкость блика (0-1)
  Плавность блика

► Specular Color - Цвет блика (HDR)
  Цвет и яркость блика

► Rim Step - Порог rim light (0-1)
  Где появляется свечение по краям

► Rim Step Smooth - Мягкость rim (0-1)
  Плавность rim light

► Rim Color - Цвет rim light
  Цвет свечения по краям

═══════════════════════════════════════════════════════════════════════════════
                           РЕЖИМЫ ПРОЗРАЧНОСТИ
═══════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────┐
│ 1. ALPHA BLEND (Стандартная прозрачность)                                    │
└─────────────────────────────────────────────────────────────────────────────┘

Для: Стекло, дым, UI, частицы

Настройки:
✓ Src Blend: SrcAlpha (5)
✓ Dst Blend: OneMinusSrcAlpha (10)
✓ Z Write: Off (0)
✓ Alpha Clipping: Off

Результат: Плавная полупрозрачность

┌─────────────────────────────────────────────────────────────────────────────┐
│ 2. ALPHA CUTOUT (Вырезание)                                                  │
└─────────────────────────────────────────────────────────────────────────────┘

Для: Листва, трава, сетки, решетки

Настройки:
✓ Src Blend: One (1)
✓ Dst Blend: Zero (0)
✓ Z Write: On (1)
✓ Alpha Clipping: On
✓ Alpha Cutoff: 0.5

Результат: Жесткое вырезание, нет полупрозрачности

┌─────────────────────────────────────────────────────────────────────────────┐
│ 3. ADDITIVE (Сложение)                                                       │
└─────────────────────────────────────────────────────────────────────────────┘

Для: Эффекты свечения, магия, огонь, лазеры

Настройки:
✓ Src Blend: One (1)
✓ Dst Blend: One (1)
✓ Z Write: Off (0)
✓ Alpha Clipping: Off

Результат: Яркое свечение, осветляет фон

┌─────────────────────────────────────────────────────────────────────────────┐
│ 4. PREMULTIPLIED ALPHA                                                       │
└─────────────────────────────────────────────────────────────────────────────┘

Для: Высококачественные полупрозрачные объекты

Настройки:
✓ Src Blend: One (1)
✓ Dst Blend: OneMinusSrcAlpha (10)
✓ Z Write: Off (0)
✓ Alpha Clipping: Off

Примечание: Требуется текстура с premultiplied alpha

═══════════════════════════════════════════════════════════════════════════════
                              ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ
═══════════════════════════════════════════════════════════════════════════════

🪟 СТЕКЛО / ОКНА:
   - Alpha Blend mode
   - Color: (1, 1, 1, 0.3) - 30% прозрачность
   - Rim Light: On (свечение по краям)
   - Specular: High (блики на стекле)

🌿 ЛИСТВА / ТРАВА:
   - Alpha Cutout mode
   - Alpha Cutoff: 0.5
   - Z Write: On
   - Shadow: Normal

💨 ДЫМ / ОБЛАКА:
   - Alpha Blend mode
   - Color: (0.8, 0.8, 0.8, 0.5)
   - Rim Light: Off
   - Soft shadows

✨ МАГИЧЕСКИЕ ЭФФЕКТЫ:
   - Additive mode
   - HDR Color
   - Rim Light: On (яркий)
   - Specular: High

🎨 HOLOGRAM / ПРОЕКЦИЯ:
   - Alpha Blend mode
   - Color: (0, 1, 1, 0.7) - голубой
   - Rim Light: On (сильный)
   - Fresnel effect

═══════════════════════════════════════════════════════════════════════════════
                         ПРОИЗВОДИТЕЛЬНОСТЬ
═══════════════════════════════════════════════════════════════════════════════

✓ Оптимизирован для URP
✓ Поддержка GPU instancing
✓ Эффективный toon lighting
✓ Minimal overdraw (с правильным Z Write)
✓ WebGL compatible

Рекомендации:
• Alpha Blend: Сортируйте объекты back-to-front
• Alpha Cutout: Используйте когда возможно (быстрее Blend)
• Избегайте много слоев прозрачности

═══════════════════════════════════════════════════════════════════════════════
                         ОСОБЕННОСТИ
═══════════════════════════════════════════════════════════════════════════════

✅ Полная поддержка освещения URP
✅ Main Light + Shadows
✅ Soft Shadows
✅ Shadow Casting (прозрачные объекты отбрасывают тени)
✅ Depth rendering
✅ Fog support
✅ GPU Instancing
✅ Toon shading (ступенчатое освещение)
✅ Specular highlights
✅ Rim lighting (Fresnel)
✅ Альфа из текстуры
✅ Альфа из Color.a
✅ Alpha Clipping
✅ Customizable blend modes

═══════════════════════════════════════════════════════════════════════════════
                         ОТЛИЧИЯ ОТ ToonLightBase
═══════════════════════════════════════════════════════════════════════════════

ДОБАВЛЕНО:
+ Transparent rendering
+ Alpha blending
+ Alpha clipping
+ Blend mode control (Src/Dst)
+ ZWrite control
+ ShadowCaster pass с alpha support
+ DepthOnly pass с alpha support

УДАЛЕНО:
- Outline pass (несовместим с прозрачностью)

СОВЕТ: Для outline на прозрачных объектах используйте отдельный outline mesh.

═══════════════════════════════════════════════════════════════════════════════
                         TROUBLESHOOTING
═══════════════════════════════════════════════════════════════════════════════

► Проблема: Объект полностью прозрачный
  Решение:
  - Проверить Color.a (должна быть > 0)
  - Проверить текстуру (альфа-канал)
  - Увеличить alpha в Color

► Проблема: Объект не прозрачный
  Решение:
  - Проверить Blend modes
  - Alpha Blend: Src=5, Dst=10
  - Color.a должна быть < 1

► Проблема: Некорректная сортировка (z-fighting)
  Решение:
  - Z Write должен быть Off для прозрачности
  - Используйте Render Queue: Transparent
  - Отсортируйте объекты вручную если нужно

► Проблема: Edges выглядят грубо (Alpha Cutout)
  Решение:
  - Настроить Alpha Cutoff (попробовать 0.3-0.7)
  - Или переключиться на Alpha Blend
  - Использовать anti-aliased текстуру

► Проблема: Тени неправильные
  Решение:
  - Включить "Cast Shadows" на Renderer
  - Alpha Clipping должен быть On для cutout shadows
  - Alpha Cutoff = тому же значению что в материале

═══════════════════════════════════════════════════════════════════════════════
                         КОМБИНАЦИЯ С ДРУГИМИ ШЕЙДЕРАМИ
═══════════════════════════════════════════════════════════════════════════════

• ToonLightBase - для непрозрачных объектов + outline
• ToonAlpha - для прозрачных объектов (этот shader)
• ToonParticle - для particle systems (упрощенный)

Используйте правильный shader для задачи!

╔═══════════════════════════════════════════════════════════════════════════════╗
║                              ГОТОВО!                                          ║
║              Toon shader с альфа-каналом готов к использованию!              ║
╚═══════════════════════════════════════════════════════════════════════════════╝

